<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservia - Resource Reservation System</title>
    
    <!-- jQuery and jQuery UI -->
    <script src="{{ url_for('static', filename='js/jquery/jquery-3.6.0.min.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='js/jquery-ui/jquery-ui.min.css') }}">
    <script src="{{ url_for('static', filename='js/jquery-ui/jquery-ui.min.js') }}"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Core JavaScript modules (order matters) -->
    <script src="{{ url_for('static', filename='js/config.js') }}"></script>
    <script src="{{ url_for('static', filename='js/crypto_utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/session_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ajax_utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dialog_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/form_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/user_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/resource_form_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/auth_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/menu_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/reservia.js') }}"></script>
    <script src="{{ url_for('static', filename='js/resource_manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/global_functions.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app_init.js') }}"></script>
    <script src="{{ url_for('static', filename='js/test_frontend.js') }}"></script>
</head>
<body>
    <!-- Header with Navigation -->
    <div id="header">
        <button id="login-btn" class="margin-right-10">Login</button>
        <button id="logout-btn" class="margin-right-10 hidden">Logout</button>
        <button id="modify-btn" class="margin-right-10 hidden">Modify</button>
        
        <!-- Manage Resources Dropdown -->
        <div class="dropdown-container hidden" id="manage-resource-container">
            <button id="manage-resource-btn" class="margin-right-10">Manage Resources</button>
            <div class="dropdown-menu" id="resource-dropdown">
                <div class="dropdown-item" data-action="add">Add</div>
                <div class="dropdown-item" data-action="remove">Remove</div>
                <div class="dropdown-item dropdown-submenu" data-action="modify">
                    Modify >
                    <div class="dropdown-submenu-content hidden" id="modify-submenu">
                        <!-- Resources loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Manage Users Dropdown -->
        <div class="dropdown-container hidden" id="manage-user-container">
            <button id="manage-user-btn" class="margin-right-10">Manage Users</button>
            <div class="dropdown-menu" id="user-dropdown">
                <div class="dropdown-item" data-action="add">Add</div>
                <div class="dropdown-item" data-action="remove">Remove</div>
                <div class="dropdown-item dropdown-submenu" data-action="modify">
                    Modify >
                    <div class="dropdown-submenu-content hidden" id="modify-user-submenu">
                        <!-- Users loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Title Section -->
    <div id="title-container" style="background-color: white; padding: 20px; text-align: center; margin-bottom: 10px; border-radius: 10px;">
        <h1>Reservia</h1>
    </div>

    <!-- Login Form Dialog -->
    <div id="login-form">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button id="login-submit">Login</button>
        <button id="login-cancel">Cancel</button>
        <div id="login-error" class="error-message"></div>
    </div>

    <!-- Modify User Form Dialog -->
    <div id="modify-form">
        <h2 id="modify-title">Modify User Data</h2>
        <input type="email" id="modify-email" placeholder="New Email (optional)">
        <input type="password" id="modify-password" placeholder="New Password (optional)">
        <button id="modify-submit">Modify</button>
        <button id="modify-cancel">Cancel</button>
        <div id="modify-error" class="error-message"></div>
        <div id="modify-success" class="success-message"></div>
    </div>

    <!-- Add Resource Form Dialog -->
    <div id="add-resource-form">
        <h2>Add New Resource</h2>
        <input type="text" id="resource-name" placeholder="Resource Name (required)">
        <input type="text" id="resource-comment" placeholder="Comment (optional)">
        <button id="add-resource-submit">Add</button>
        <button id="add-resource-cancel">Cancel</button>
        <div id="add-resource-error" class="error-message"></div>
        <div id="add-resource-success" class="success-message"></div>
    </div>

    <!-- Resource Select Form Dialog -->
    <div id="resource-select-form">
        <h2>Select Resource to Modify</h2>
        <select id="resource-select" class="form-select">
            <option value="">-- Select a resource --</option>
        </select>
        <button id="resource-select-submit">Modify Selected</button>
        <button id="resource-select-cancel">Cancel</button>
        <div id="resource-select-error" class="error-message"></div>
    </div>

    <!-- Modify Resource Form Dialog -->
    <div id="modify-resource-form">
        <h2 id="modify-resource-title">Modify Resource</h2>
        <input type="text" id="modify-resource-name" placeholder="Resource Name">
        <input type="text" id="modify-resource-comment" placeholder="Comment (optional)">
        <button id="modify-resource-submit">Modify</button>
        <button id="modify-resource-cancel">Cancel</button>
        <div id="modify-resource-error" class="error-message"></div>
        <div id="modify-resource-success" class="success-message"></div>
    </div>

    <!-- Add User Form Dialog -->
    <div id="add-user-form">
        <h2>Add New User</h2>
        <input type="text" id="user-name" placeholder="User Name (required)">
        <input type="email" id="user-email" placeholder="Email (required)">
        <input type="password" id="user-password" placeholder="Password (required)">
        <button id="add-user-submit">Add</button>
        <button id="add-user-cancel">Cancel</button>
        <div id="add-user-error" class="error-message"></div>
        <div id="add-user-success" class="success-message"></div>
    </div>

    <!-- Modify User Form Dialog -->
    <div id="modify-user-form">
        <h2 id="modify-user-title">Modify User</h2>
        <input type="email" id="modify-user-email" placeholder="Email">
        <input type="password" id="modify-user-password" placeholder="New Password (optional)">
        <button id="modify-user-submit">Modify</button>
        <button id="modify-user-cancel">Cancel</button>
        <div id="modify-user-error" class="error-message"></div>
        <div id="modify-user-success" class="success-message"></div>
    </div>

    <!-- Main Content -->
    <div id="main-content">
        <p>Welcome to Reservia Resource Reservation System</p>
    </div>
    
    <!-- Resource Pool Container -->
    <div id="resource-pool-container"></div>
</body>
</html>